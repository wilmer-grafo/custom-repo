Actualizar fecha recepcion en memoriales

update comunes.memoriales
set fecha_recepcion =

update comunes.memoriales
set fecha_respuesta =
                                   

EXCEL, from PG

select concat(aux.numero_recurso_alzada, ';', to_char(aux.fecha_recepcion, 'YYYY-MM-DD HH24:MI:SS')) as dato,
       aux.id                                                                                        as valor
from (select (select ra.numero_recurso_alzada
              from alzada.alz_recursos_alzada ra
              where ra.id = m.id_recurso_alzada
             ) as numero_recurso_alzada,
             m.fecha_recepcion,
             m.id
      from comunes.memoriales m
      where id_recurso_alzada in (
          select id
          from alzada.alz_recursos_alzada
          where (numero_recurso_alzada ilike 'ARIT-%-%/2021%' or
                 numero_recurso_alzada ilike 'ARIT-%-%/2022%')
      )
        and id_motivo_memorial in (15, 29)) as aux
order by aux.id;



EXCEL, from SQL

SELECT (CASE
            WHEN LEN(LTRIM(RTRIM(ct.id_exp))) > 20 THEN
                (SELECT id
                 FROM recursos AS r
                 WHERE r.numero_recurso_alzada =
                       SUBSTRING(LTRIM(RTRIM(ct.id_exp)), 0, CHARINDEX('//', LTRIM(RTRIM(ct.id_exp)))))
            ELSE
                (SELECT id FROM recursos AS r WHERE r.numero_recurso_alzada = LTRIM(RTRIM(ct.id_exp)))
    END)                                                                   AS id_recurso_alzada,
       ((CASE
             WHEN LEN(LTRIM(RTRIM(ct.id_exp))) > 20 THEN
                 SUBSTRING(LTRIM(RTRIM(ct.id_exp)), 0, CHARINDEX('//', LTRIM(RTRIM(ct.id_exp))))
             ELSE
                 LTRIM(RTRIM(ct.id_exp))
           END)
           + ';' + SUBSTRING(CONVERT(varchar, ct.f_registro, 120), 1, 19)) AS id_memorial,
       ('ARIT-RA-' + (
           CASE
               WHEN LEN(LTRIM(RTRIM(ct.correlativo))) = 1 THEN '000' + LTRIM(RTRIM(ct.correlativo))
               WHEN LEN(LTRIM(RTRIM(ct.correlativo))) = 2 THEN '00' + LTRIM(RTRIM(ct.correlativo))
               WHEN LEN(LTRIM(RTRIM(ct.correlativo))) = 3 THEN '0' + LTRIM(RTRIM(ct.correlativo))
               WHEN LEN(LTRIM(RTRIM(ct.correlativo))) = 4 THEN LTRIM(RTRIM(ct.correlativo))
               END
           ) + '/' + CAST(ct.gestion AS VARCHAR))                          as numero_auto_motivado,
       (CASE
            WHEN ct.f_liberacion = '1900-01-01 00:00:00.000' THEN NULL
            ELSE ct.f_liberacion
           END)                                                            AS fecha_liberacion,
       20                                                                  AS estado,
       ct.f_registro                                                       AS fecha_entrega
FROM reg_aclaracion AS ct
WHERE (LTRIM(RTRIM(ct.id_exp)) LIKE 'ARIT-%-%/2021%' OR
       LTRIM(RTRIM(ct.id_exp)) LIKE 'ARIT-%-%/2022%')
ORDER BY id;
