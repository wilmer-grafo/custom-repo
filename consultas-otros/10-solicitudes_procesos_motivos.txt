-- obtener los expedientes SQL SERVER

SELECT dd.id_exp, 1 AS id
FROM (SELECT (CASE
                  WHEN LEN(LTRIM(RTRIM(id_exp))) > 20 THEN SUBSTRING(LTRIM(RTRIM(id_exp)), 0,
                                                                     CHARINDEX('//', LTRIM(RTRIM(id_exp))))
                  ELSE LTRIM(RTRIM(id_exp))
    END) as id_exp
      FROM solicitud_excusa
      WHERE (LTRIM(RTRIM(id_exp)) LIKE 'ARIT-CHQ-%/2021%' OR
             LTRIM(RTRIM(id_exp)) LIKE 'ARIT-CHQ-%/2022%')
      GROUP BY LTRIM(RTRIM(id_exp))) AS dd
ORDER BY dd.id_exp;

-- obtener los id's de los expedientes, PG

select (select ra.numero_recurso_alzada
        from alzada.alz_recursos_alzada ra
        where ra.id = temp.id_recurso_alzada) as numero_recurso_alzada,
       temp.id                                as id_solicitud_proceso
from (select id_recurso_alzada, id
      from alzada.alz_solicitudes_procesos
      where id_recurso_alzada in (
          select id
          from alzada.alz_recursos_alzada
          where numero_recurso_alzada in (
              )
      )) AS temp
order by numero_recurso_alzada;

ARMAR
-----
LTRIM(RTRIM(ct.id_exp))


SELECT (CASE
            WHEN LTRIM(RTRIM(ct.id_exp)) = 'ARIT-LPZ-0109/2018' THEN 32
            WHEN LTRIM(RTRIM(ct.id_exp)) = 'ARIT-LPZ-0964/2019' THEN 34
            WHEN LTRIM(RTRIM(ct.id_exp)) = 'ARIT-LPZ-0965/2019' THEN 35
            WHEN LTRIM(RTRIM(ct.id_exp)) = 'ARIT-LPZ-1050/2017' THEN 33
            WHEN LTRIM(RTRIM(ct.id_exp)) = 'ARIT-LPZ-1434/2017' THEN 31
    END)                                                  AS id_solicitud,
       REPLACE(LTRIM(RTRIM(ct.motivo_solicita)), '/', '') AS id_motivo,
       (CASE
            WHEN LTRIM(RTRIM(ct.u_solicita)) = 'mgemio' THEN 275
            WHEN LTRIM(RTRIM(ct.u_solicita)) = 'nherrera' THEN 386
            WHEN LTRIM(RTRIM(ct.u_solicita)) = 'sferreira' THEN 307
            ELSE 238
           END)                                           AS id_usuario_registra,
       ct.f_solicita                                      AS fecha_registra
FROM solicitud_excusa ct
WHERE LEN(LTRIM(RTRIM(ct.motivo_solicita))) <= 2
ORDER BY ct.id;


CASO 4/
