TRUNCATE TABLE seguridad.seg_areas RESTART IDENTITY CASCADE;

DROP TABLE seguridad.seg_regiones CASCADE;

export with pg_dump

modify sequence

=================
ULTIMOS REGISTROS 

parametricas

SELECT *
FROM (SELECT TOP 2 * FROM TSS_ADMINISTRACIONES_TRIBUTARIAS ORDER BY N_Codigo_Adm_Tri DESC) AS te
ORDER BY te.N_Codigo_Adm_Tri;

SELECT *
FROM (SELECT TOP 4 * FROM TSS_SUBADMINISTRACIONES_TRIBUTARIAS ORDER BY N_Codigo_Subadm_Tri DESC) AS te
ORDER BY te.N_Codigo_Subadm_Tri;

comunes

TRUNCATE TABLE comunes.feriados RESTART IDENTITY;

UPDATE comunes.feriados
SET fecha =
  (fecha AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

parametricas

TRUNCATE TABLE parametricas.par_tipos_cambios_ufv RESTART IDENTITY;

UPDATE parametricas.par_tipos_cambios_ufv
SET fecha =
  (fecha AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

seguridad

SELECT *
FROM (SELECT TOP 48 * FROM TSS_FUNCIONARIOS ORDER BY N_Codigo_Funcionario DESC) AS te
ORDER BY te.N_Codigo_Funcionario;

parametricas

SELECT *
FROM (SELECT TOP 8 * FROM TSS_ACTOS ORDER BY N_Codigo_Acto DESC) AS te
ORDER BY te.N_Codigo_Acto;

------------------------------------------------------------------------------------------------
alzada.alz_recursos_alzada
------------------------------------------------------------------------------------------------
SET DATEFORMAT 'YMD';

TRUNCATE TABLE alzada.alz_recursos_alzada RESTART IDENTITY CASCADE;

UPDATE alzada.alz_recursos_alzada
SET fecha_presentacion =
        (fecha_presentacion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

UPDATE alzada.alz_recursos_alzada
SET fecha_respuesta_administracion =
        (fecha_respuesta_administracion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

UPDATE alzada.alz_recursos_alzada
SET fecha_vencimiento =
        (fecha_vencimiento AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';
		
------------------------------------------------------------------------------------------------
alzada.alz_actos_impugnados
------------------------------------------------------------------------------------------------

TRUNCATE TABLE alzada.alz_actos_impugnados RESTART IDENTITY CASCADE;

UPDATE alzada.alz_actos_impugnados
SET fecha_emision =
        (fecha_emision AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';
		
UPDATE alzada.alz_actos_impugnados
SET fecha_notificacion =
        (fecha_notificacion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

parametricas.par_tipos_impuestos
SIN CAMBIOS



------------------------------------------------------------------------------------------------
alzada.alz_notificaciones
------------------------------------------------------------------------------------------------

TRUNCATE TABLE alzada.alz_notificaciones RESTART IDENTITY;

SET DATEFORMAT 'YMD';

UPDATE alzada.alz_notificaciones
SET fecha_hora_notificacion =
        (fecha_hora_notificacion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';
		
UPDATE alzada.alz_notificaciones
SET fecha_actuacion_registro =
        (fecha_actuacion_registro AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

------------------------------------------------------------------------------------------------
alzada.alz_representantes_at
------------------------------------------------------------------------------------------------

TRUNCATE TABLE alzada.alz_representantes_at RESTART IDENTITY CASCADE;

------------------------------------------------------------------------------------------------
alzada.alz_recursos_alzada_representantes_at
------------------------------------------------------------------------------------------------

TRUNCATE TABLE alzada.alz_recursos_alzada_representantes_at RESTART IDENTITY;


------------------------------------------------------------------------------------------------
alzada.alz_representantes_sp
------------------------------------------------------------------------------------------------

TRUNCATE TABLE alzada.alz_representantes_sp RESTART IDENTITY CASCADE;

------------------------------------------------------------------------------------------------
alzada.alz_actuaciones - TSS_AUTOS_PREVIOS_JER
------------------------------------------------------------------------------------------------




TRUNCATE TABLE alzada.alz_registros_documentales_sustantivos RESTART IDENTITY CASCADE;

TRUNCATE TABLE alzada.alz_registros_documentales_sustantivos_anexos RESTART IDENTITY;


------------------------------------------------------------------------------------------------
comunes.memoriales - reg_memorial
------------------------------------------------------------------------------------------------
fecha_recepcion, fecha_respuesta

update comunes.memoriales
SET fecha_respuesta =
        (fecha_respuesta AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz'
where id_recurso_alzada in
      (select id
       from alzada.alz_recursos_alzada
       where id in (select id
                    from alzada.alz_recursos_alzada
                    where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                           numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                    order by numero_recurso_alzada)
      );


TRUNCATE TABLE comunes.memoriales RESTART IDENTITY CASCADE;


------------------------------------------------------------------------------------------------
alzada.alz_aclaraciones - reg_aclaracion
------------------------------------------------------------------------------------------------
fecha_liberacion, fecha_entrega

update alzada.alz_aclaraciones
SET fecha_liberacion =
        (fecha_liberacion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz'
where id_recurso_alzada in
      (select id
       from alzada.alz_recursos_alzada
       where id in (select id
                    from alzada.alz_recursos_alzada
                    where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                           numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                    order by numero_recurso_alzada)
      );

TRUNCATE TABLE alzada.alz_aclaraciones RESTART IDENTITY;

------------------------------------------------------------------------------------------------
alzada.alz_solicitudes_procesos - solicita_cambio_decision
------------------------------------------------------------------------------------------------
		
update alzada.alz_solicitudes_procesos
SET fecha_solicita =
        (fecha_solicita AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz'
where id_recurso_alzada in
      (select id
       from alzada.alz_recursos_alzada
       where id in (select id
                    from alzada.alz_recursos_alzada
                    where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                           numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                    order by numero_recurso_alzada)
      );

------------------------------------------------------------------------------------------------
alzada.alz_trazabilidad_solicitudes_procesos - - solicita_cambio_decision
------------------------------------------------------------------------------------------------

update alzada.alz_trazabilidad_solicitudes_procesos
SET fecha_accion =
        (fecha_accion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz'
where id_solicitud_proceso in (select atsp.id_solicitud_proceso
from alzada.alz_solicitudes_procesos as asp
         inner join alzada.alz_trazabilidad_solicitudes_procesos atsp on asp.id = atsp.id_solicitud_proceso
where asp.id_recurso_alzada in (select id
                                from alzada.alz_recursos_alzada
                                where id in (select id
                                             from alzada.alz_recursos_alzada
                                             where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                                                    numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                                             order by numero_recurso_alzada)
));


-- VERIFICAR

select atsp.*
from alzada.alz_solicitudes_procesos as asp
         inner join alzada.alz_trazabilidad_solicitudes_procesos atsp on asp.id = atsp.id_solicitud_proceso
where asp.id_recurso_alzada in (select id
                                from alzada.alz_recursos_alzada
                                where id in (select id
                                             from alzada.alz_recursos_alzada
                                             where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                                                    numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                                             order by numero_recurso_alzada)
);

------------------------------------------------------------------------------------------------
alzada.alz_solicitudes_procesos - solicitud_excusa
------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
alz_solicitudes_procesos_motivos
------------------------------------------------------------------------------------------------

UPDATE alzada.alz_solicitudes_procesos_motivos
SET fecha_registra =
        (fecha_registra AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';

------------------------------------------------------------------------------------------------
alz_trazabilidad_solicitudes_procesos
------------------------------------------------------------------------------------------------

UPDATE alzada.alz_trazabilidad_solicitudes_procesos
SET fecha_accion =
        (fecha_accion AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz';
		

UPDATE alzada.alz_trazabilidad_solicitudes_procesos
SET fecha_accion = fecha_accion + interval '4 hours'
WHERE id IN (61,
             62,
             63,
             64,
             65
    );

------------------------------------------------------------------------------------------------
alzada.alz_notas - log_nota
------------------------------------------------------------------------------------------------

update alzada.alz_notas
SET fecha_nota =
        (fecha_nota AT TIME ZONE 'UTC') AT TIME ZONE 'America/La_Paz'
where id_recurso_alzada in
      (select id
       from alzada.alz_recursos_alzada
       where id in (select id
                    from alzada.alz_recursos_alzada
                    where (numero_recurso_alzada ilike 'ARIT-CHQ-%/2021%' or
                           numero_recurso_alzada ilike 'ARIT-CHQ-%/2022%')
                    order by numero_recurso_alzada)
      );


------------------------------------------------------------------------------------------------
--PostgreSQL
------------------------------------------------------------------------------------------------

-- id_alz_recursos_alzada
select numero_recurso_alzada, id
from alzada.alz_recursos_alzada
where (numero_recurso_alzada like 'ARIT-TJA-%/2021%' OR
       numero_recurso_alzada like 'ARIT-TJA-%/2022%')
order by numero_recurso_alzada;


TRUNCATE TABLE alzada.alz_actuaciones RESTART IDENTITY CASCADE;